(function(){var t;t=function(){function t(t,e){var n,o;this.setPaterno(null!=t?t.paterno:void 0),this.setMaterno(null!=t?t.materno:void 0),this.setNombres(null!=t?t.nombres:void 0),this.setFechaNacimiento(null!=t?t.fechaNacimiento:void 0),this.setSexo(null!=t?t.sexo:void 0),this.setEntidad(null!=t?t.entidad:void 0),this.setCURP(null!=t?t.curp:void 0),this.setM(null!=e&&null!=(n=e.sexo)?n.m:void 0),this.setH(null!=e&&null!=(o=e.sexo)?o.h:void 0),this.setHistory(),this.init()}var e,n,o,i,r,s,a,u;return e=/[A-Z]{4}\d{6}[HM][A-Z]{2}[A-Z]{3}[A-Z0-9]\d/,a=[/[A-Z]{1,4}/,/\d{1,6}/,/[HM]{1}/,/[A-Z]{1,2}/,/[A-Z]{1,3}/,/[A-Z0-9]{1}/,/\d{1}/],u={"Á":"A","É":"E","Í":"I","Ó":"O","Ú":"U","Ü":"U"},o=["Ñ","/","-",".","'"],r=["MARIA","MA.","MA","M.","M","JOSE","J.","J"],i=["DA","DAS","DE","DEL","DER","DI","DIE","DD","Y","EL","LA","LOS","LAS","LE","LES","MAC","MC","VAN","VON"],s=["BACA","BAKA","BUEI","BUEY","CACA","CACO","CAGA","CAGO","CAKA","CAKO","COGE","COGI","COJA","COJE","COJI","COJO","COLA","CULO","FALO","FETO","GETA","GUEI","GUEY","JETA","JOTO","KACA","KACO","KAGA","KAGO","KAKA","KAKO","KOGE","KOGI","KOJA","KOJE","KOJI","KOJO","KOLA","KULO","LILO","LOCA","LOCO","LOKA","LOKO","MAME","MAMO","MEAR","MEAS","MEON","MIAR","MION","MOCO","MOKO","MULA","MULO","NACA","NAKA","NACO","NAKO","PEDA","PEDO","PENE","PIPI","PITO","POTO","PUTA","PUTO","QULO","RATA","ROBA","ROBE","ROBO","RUIN","SENO","TETA","VACA","VAGA","VAGO","VAKA","VUEI","VUEY","WUEI","WUEY"],n={AS:"AGUASCALIENTES",BC:"BAJA CALIFORNIA",BS:"BAJA CALIFORNIA SUR",CC:"CAMPECHE",CL:"COAHUILA DE ZARAGOZA",CM:"COLIMA",CS:"CHIAPAS",CH:"CHIHUAHUA",DF:"DISTRITO FEDERAL",DG:"DURANGO",GT:"GUANAJUATO",GR:"GUERRERO",HG:"HIDALGO",JC:"JALISCO",MC:"MEXICO",MN:"MICHOACAN DE OCAMPO",MS:"MORELOS",NT:"NAYARIT",NL:"NUEVO LEON",OC:"OAXACA",PL:"PUEBLA",QT:"QUERETARO DE ARTEAGA",QR:"QUINTANA ROO",SP:"SAN LUIS POTOSI",SL:"SINALOA",SR:"SONORA",TC:"TABASCO",TS:"TAMAULIPAS",TL:"TLAXCALA",VZ:"VERACRUZ",YN:"YUCATAN",ZS:"ZACATECAS",NE:"NACIDO EN EL EXTRANJERO"},t.prototype.init=function(){var t,o,i,r,s,a,u,l,p,c,h,A,O,C;if(i=this,null!=(s=this.getCURP())&&s.attr("pattern",e.source),t=this.getEntidad())for(C in n)r=n[C],o=$("<option/>",{value:C,text:r}),t.append(o);return null!=(a=this.getMaterno())&&a.keyup(function(){return i.generate()}),null!=(u=this.getPaterno())&&u.keyup(function(){return i.generate()}),null!=(l=this.getNombres())&&l.keyup(function(){return i.generate()}),null!=(p=this.getFechaNacimiento())&&p.keyup(function(){return i.generate()}),null!=(c=this.getSexo())&&c.change(function(){return i.generate()}),null!=(h=this.getEntidad())&&h.change(function(){return i.generate()}),null!=(A=this.getCURP())&&A.keydown(function(t){return i.editCURP(t)}),null!=(O=this.getCURP())?O.on("update",function(){return i.updateInputs()}):void 0},t.prototype.updateInputs=function(){var t,e,o,i,r,s,u,l,p,c,h,A,O,C;if(t=this.getCURP(),C=t.val(),r=new RegExp("("+a.map(function(t,e){return t.source}).join(")?(")+")?"),i=C.match(r).filter(function(t,e){if(null!=t&&0!==e)return t}),0!==(null!=(s=i[1])?s.length:void 0)){if(O=i[1],e=O.match(/(\d{2})?(\d{2})?(\d{2})?/).slice(1).map(function(t){return null!=t?t:"01"}),e=[e[1],e[2],e[0]],e=new Date(e.join("/")),isNaN(e.getFullYear()))return this.setHistory(),t.val(C.slice(0,4).concat("______").concat(C.substr(10))),!1;null!=(u=this.getFechaNacimiento())&&u.val(e.toJSON().slice(0,10).split("-").reverse().join("/"))}if(null!=i[2]&&("M"===(O=i[2])&&null!=(l=this.getSexo())&&l.val(this.getM()),"H"===O&&null!=(p=this.getSexo())&&p.val(this.getH())),2===(null!=(c=i[3])?c.length:void 0)){O=i[3],o=void 0;for(A in n)if(n[A],A===O){o=!0;break}return o?null!=(h=this.getEntidad())?h.val(O):void 0:this.undo(2)}},t.prototype.editCURP=function(t){var e,n,o,i,r,s,u,l,p,c;if(9!==t.keyCode&&t.preventDefault(),8===t.keyCode)return this.undo();if(1===t.key.length&&(r=t.key.toUpperCase()),e=this.getCURP(),c=e.val(),/[A-Z0-9]/.test(r)&&""!==c){if(-1===(o=c.indexOf("_")))return t;for(n=0,l=void 0,i=0,s=a.length;i<s&&(u=a[i],l=u,p=u.toString().match(/\{(\d),?(\d)?/),n+=parseInt(p[2]||p[1]),!(o<n));i++);if(l.test(r))return e.val(c.substr(0,o).concat(r).concat(c.substr(o+1))),this.history().push(o),e.trigger("update")}},t.prototype.undo=function(t){var e,n,o,i,r;if(null==t&&(t=1),0===this.history().length)return!1;for(i=[],n=0,o=t;n<o;n+=1)e=this.history().pop(),r=this.getCURP().val(),this.getCURP().val(r.substr(0,e).concat("_").concat(r.substr(e+1))),i.push(this.getCURP().trigger("update"));return i},t.prototype.generate=function(){var t;return(t=[]).push(this.escapeBadWords()),t.push(this.scrapFechaNacimiento()),t.push(this.scrapSexo()),t.push(this.scrapEntidad()),t.push(this.scrapPaternoConsonante()),t.push(this.scrapMaternoConsonante()),t.push(this.scrapNombresConsonante()),t.push("__"),this.getCURP().val(t.join(""))},t.prototype.scrapNombresConsonante=function(){var t,e;return(t=this.getNombres())?(e=this.cleanText(t.val()),this.getConsonant(this.cleanNames(e).substr(1))):"X"},t.prototype.scrapMaternoConsonante=function(){var t,e;return(t=this.getMaterno())?(e=this.cleanText(t.val()),this.getConsonant(e.slice(1))):"X"},t.prototype.scrapPaternoConsonante=function(){var t,e;return(t=this.getPaterno())?(e=this.cleanText(t.val()),this.getConsonant(e.slice(1))):"X"},t.prototype.scrapEntidad=function(){var t,e,o;if(!(t=this.getEntidad()))return"__";o=t.val();for(e in n)if(n[e],e===o)return e;return"__"},t.prototype.scrapSexo=function(){var t,e;return(t=this.getSexo())?(e=t.val())===this.getM()?"M":e===this.getH()?"H":"_":"_"},t.prototype.scrapFechaNacimiento=function(){var t,e,n;return(t=this.getFechaNacimiento())&&(n=t.val().match(/(\d{2})\/(\d{2})\/(\d{4})/))?(e=new Date(n.slice(1).reverse().join("/")),isNaN(e.getFullYear())?"______":e.toJSON().slice(2,10).split("-").join("")):"______"},t.prototype.escapeBadWords=function(){var t;return(t=[]).push(this.scrapPaterno()),t.push(this.scrapMaterno()),t.push(this.scrapNombres()),t=t.join(""),-1!==s.indexOf(t)?t.slice(0,1)+"X"+t.substr(2):t},t.prototype.scrapNombres=function(){var t,e;return(t=this.getNombres())?0===(e=this.cleanText(t.val())).length?"X":this.cleanNames(e).slice(0,1):"X"},t.prototype.scrapMaterno=function(){var t,e;return(t=this.getMaterno())?0===(e=this.cleanText(t.val())).length?"X":e.slice(0,1):"X"},t.prototype.scrapPaterno=function(){var t,e,n;return(t=this.getPaterno())?0===(e=this.cleanText(t.val())).length?"XX":1===e.length?e+"X":(n=this.getVocal(e.substr(1)),e.slice(0,1)+n):"XX"},t.prototype.cleanNames=function(t){return 1===t.split(/\s+/).length?t.split(/\s+/).join(" "):t.split(/\s+/).filter(function(t,e){return-1===r.indexOf(t)}).join(" ")},t.prototype.getConsonant=function(t){var e;return(null!=(e=t.match(/[^AEIOU]/gi))?e.length:void 0)>0?e[0]:"X"},t.prototype.getVocal=function(t){var e;return(null!=(e=t.match(/[AEIOU]/gi))?e.length:void 0)>0?e[0]:"X"},t.prototype.cleanText=function(t){var e,n,r,s,a;null==t&&(t=""),t=(t=t.toUpperCase()).split(/\s+/).filter(function(t,e){return-1===i.indexOf(t)}).join(" ");for(r in u)a=u[r],t=t.replace(r,a);for(n=0,s=o.length;n<s;n++)e=o[n],t=t.replace(e,"X");return t.trim()},t.prototype.history=function(){return this._history},t.prototype.setHistory=function(t){this._history=null!=t?t:[]},t.prototype.getM=function(){return this._M},t.prototype.setM=function(t){this._M=null!=t?t:"M"},t.prototype.getH=function(){return this._H},t.prototype.setH=function(t){this._H=null!=t?t:"H"},t.prototype.getMaterno=function(){return this._materno},t.prototype.setMaterno=function(t){this._materno=null!=t?t:void 0},t.prototype.getPaterno=function(){return this._paterno},t.prototype.setPaterno=function(t){this._paterno=null!=t?t:void 0},t.prototype.getNombres=function(){return this._nombres},t.prototype.setNombres=function(t){this._nombres=null!=t?t:void 0},t.prototype.getCURP=function(){return this._curp},t.prototype.setCURP=function(t){this._curp=null!=t?t:void 0},t.prototype.getFechaNacimiento=function(){return this._fechaNacimiento},t.prototype.setFechaNacimiento=function(t){this._fechaNacimiento=null!=t?t:void 0},t.prototype.getSexo=function(){return this._sexo},t.prototype.setSexo=function(t){this._sexo=null!=t?t:void 0},t.prototype.getEntidad=function(){return this._entidad},t.prototype.setEntidad=function(t){this._entidad=null!=t?t:void 0},t}(),"undefined"!=typeof window&&null!==window&&(window.CURP=t)}).call(this);